<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core">


	<h:form id="vendorDetails" enctype="multipart/form-data">
		<p:panel header="Vendor Details" style="text-align:center"
			rendered="#{adminBean.vendorEditPanel}">

			<div class="ui-g"
				style="margin-left: 10%; margin-right: 10%; margin-top: 1%; border: none;">

				<div class="ui-g-12 ui-md-6 ui-lg-3" style="border: none;">
					<h:panelGrid style="border: none;" columns="2">
						<p:outputLabel style="font-size:16px" value="Vendor Id:" />
						<h:outputText style="font-size:16px"
							value="#{adminBean.vendor.venderId}" />
					</h:panelGrid>
				</div>

				<div class="ui-g-12 ui-md-6 ui-lg-3" style="border: none;">
					<h:panelGrid style="border: none;" columns="2">
						<p:outputLabel style="font-size:16px" value="Vendor Name:" />
						<h:outputText style="font-size:16px"
							value="#{adminBean.vendor.venderName}" />
					</h:panelGrid>
				</div>

				<div class="ui-g-12 ui-md-6 ui-lg-3" style="border: none;">
					<h:panelGrid style="border: none;" columns="2">
						<p:outputLabel style="font-size:16px" value="Vendor Pan:" />
						<h:outputText style="font-size:16px"
							value="#{adminBean.vendor.venderPan}" />
					</h:panelGrid>
				</div>

				<div class="ui-g-12 ui-md-6 ui-lg-3" style="border: none;">
					<h:panelGrid style="border: none;" columns="2">
						<p:outputLabel style="font-size:16px" value="Vendor Address:" />
						<h:outputText style="font-size:16px"
							value="#{adminBean.vendor.venderAddress}" />
					</h:panelGrid>
				</div>

				<div class="ui-g-12 ui-md-6 ui-lg-3" style="border: none;">
					<h:panelGrid style="border: none;" columns="2">
						<p:outputLabel style="font-size:16px" value="Vendor Mobile:" />
						<h:outputText style="font-size:16px"
							value="#{adminBean.vendor.venderMobile}" />
					</h:panelGrid>
				</div>

				<div class="ui-g-12 ui-md-6 ui-lg-3" style="border: none;">
					<h:panelGrid style="border: none;" columns="2">
						<p:outputLabel style="font-size:16px" value="Vendor Email:" />
						<h:outputText style="font-size:16px"
							value="#{adminBean.vendor.venderEmail}" />
					</h:panelGrid>
				</div>

				<div class="ui-g-12 ui-md-6 ui-lg-3" style="border: none;">
					<h:panelGrid style="border: none;" columns="2">
						<p:outputLabel style="font-size:16px" value="Remarks:" />
						<h:outputText style="font-size:16px"
							value="#{adminBean.vendor.remarks}" />
					</h:panelGrid>
				</div>

			</div>



			<p:panel style="border:none"
				rendered="#{not empty adminBean.vendor.vendorDocumentses}">
				<div class="ui-g"
					style="margin-left: 10%; margin-right: 10%; margin-top: 1%; border: none;">

					<div class="ui-g-12 ui-md-6 ui-lg-12" style="border: none;">
						<h:panelGrid style="border: none;" columns="1">
							<p:outputLabel
								style="font-weight: bold;font-size:18px;color:Teal"
								value="Documents :- " />
						</h:panelGrid>
					</div>
					<div class="ui-g-12 ui-md-6 ui-lg-12" style="border: none;">
						<h:panelGrid style="border: none;" columns="2">
							<c:forEach items="${adminBean.vendor.vendorDocumentses}"
								var="doc">
								<p:outputLabel style="font-size:16px" value="File Name : " />

								<h:commandLink action="#{adminBean.openFile()}"
									value="#{doc.fileName}" target="_blank" immediate="true">
									<f:param name="filePath" value="#{doc.filePath}" />
									<f:param name="filename" value="#{doc.fileName}" />
									<f:param name="extension" value="#{doc.extension}" />
								</h:commandLink>
							</c:forEach>
						</h:panelGrid>
					</div>
				</div>
			</p:panel>



			<f:facet name="footer">
				<div style="text-align: center">

					<p:commandButton value="Back" action="#{adminBean.vendorList()}"
						update=":mainBody" />

					<p:commandButton value="Edit" action="#{adminBean.editVendor()}"
						onclick="PF('statusDialog').show()"
						oncomplete="PF('statusDialog').hide()" update=":vendorDetails" />

				</div>
			</f:facet>

		</p:panel>


		<p:panel style="margin-top:1%"
			rendered="#{!adminBean.vendorEditPanel}">
			<f:facet name="header">Update Vendor</f:facet>

			<div class="ui-g">

				<div class="ui-g-12 ui-md-6 ui-lg-6">
					<h:panelGrid style="width:100%">
						<p:outputLabel for="vendor-name" value="Vendor Name:" />
						<p:inputText id="vendor-name"
							value="#{adminBean.vendor.venderName}" required="true"
							requiredMessage="Enter Vendor Name" placeholder="Vendor Name" />
						<p:message for="vendor-name" />
					</h:panelGrid>

					<h:panelGrid style="width:100%">
						<p:outputLabel for="vendor-mobile" value="Vendor Mobile:" />
						<p:inputText id="vendor-mobile" validatorMessage="Please Enter Only Ten Digits"
							value="#{adminBean.vendor.venderMobile}" required="true"
							requiredMessage="Enter Vendor Mobile" placeholder="Vendor Mobile">
							
							<f:validateRegex pattern="[0-9]*" />
							 <f:validateLength minimum="10" maximum="10" />
							</p:inputText>
						<p:message for="vendor-mobile" />
					</h:panelGrid>

					<h:panelGrid style="width:100%">
						<p:outputLabel for="vendor-email" value="Vendor Email:" />
						<p:inputText id="vendor-email"
							value="#{adminBean.vendor.venderEmail}"
							placeholder="Vendor Email" validatorMessage="Please Enter Valid Email">
						<f:validateRegex pattern="[\w\.-]*[a-zA-Z0-9_]@[\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z]" />
						</p:inputText>
						<p:message for="vendor-email" />
					</h:panelGrid>

					<h:panelGrid style="width:100%">
						<p:outputLabel for="vendor-pan" value="Vendor Pan No.:" />
						<p:inputText id="vendor-pan" value="#{adminBean.vendor.venderPan}"
							placeholder="Vendor Pan" />
						<p:message for="vendor-pan" />
					</h:panelGrid>

					<h:panelGrid style="width:100%">
						<p:outputLabel for="vendor-vat" value="Vat:" />
						<p:inputText id="vendor-vat" value="#{adminBean.vendor.vat}"
							placeholder="Vat" converterMessage="Please Enter Number Only" />
						<p:message for="vendor-vat" />
					</h:panelGrid>

					<h:panelGrid style="width:100%">
						<p:outputLabel for="vendor-serviceTax" value="Service Tax:" />
						<p:inputText id="vendor-serviceTax"
							value="#{adminBean.vendor.serviceTax}"
							placeholder="Service Tax" converterMessage="Please Enter Number Only" />
						<p:message for="vendor-serviceTax" />
					</h:panelGrid>

				</div>

				<div class="ui-g-12 ui-md-6 ui-lg-6">
					<h:panelGrid style="width:100%">
						<p:outputLabel for="vendor-address" value="Vendor Address:" />
						<p:inputTextarea id="vendor-address"
							value="#{adminBean.vendor.venderAddress}" required="true"
							rows="5" cols="30" requiredMessage="Enter Vendor Address"
							placeholder="Vendor Address" autoResize="false" />
						<p:message for="vendor-address" />
					</h:panelGrid>

					<h:panelGrid style="width:100%">
						<p:outputLabel for="remarks" value="Remarks:" />
						<p:inputTextarea id="remarks"
							value="#{adminBean.vendor.remarks}" rows="5" cols="30"
							placeholder="Remarks" autoResize="false" />
					</h:panelGrid>

					<h:panelGrid style="width:100%">
						<p:outputLabel for="documents" value="Documents:" />
						<p:fileUpload id="documents" update="file"
							fileUploadListener="#{adminBean.vendorFileUpload}"
							mode="advanced" multiple="true" />
					</h:panelGrid>

					<h:panelGrid style="width:27.5%;%" columns="2" cellpadding="0" cellspacing="2" id="file">
						<p:outputLabel value=" Uploaded Documents:"  rendered="#{adminBean.vendorFileNames.size() > '0'}"/>
						<br></br>
						<c:forEach items="${adminBean.vendorFileNames}" var="doc">
						
						<p:outputLabel style="font-weight: bold;color:Teal"  value="#{doc}" />
							<p:commandLink actionListener="#{adminBean.vendorFileDelete}" update=":vendorDetails,file" style="font-weight: bold;color:red"  value="delete">
									 <f:param name="deletefile" value="#{doc}" />
								</p:commandLink>
						</c:forEach>
					</h:panelGrid>

				</div>

			</div>

			<p:panel id="vendorUploadedFiles" header="Uploaded Documents"
				rendered="#{not empty adminBean.vendorDocumentsList}">
				<c:forEach items="${adminBean.vendorDocumentsList}" var="doc">
					<div class="ui-g" style="border: none;">
						<div class="ui-g-12 ui-md-6 ui-lg-1" style="border: none;">
							<h:panelGrid style="border: none;">
								<p:outputLabel value="#{doc.fileName}" />
							</h:panelGrid>
						</div>

						<div class="ui-g-12 ui-md-6 ui-lg-1" style="border: none;">
							<h:panelGrid style="border: none;">
								<p:commandLink style="color:red;" update="vendorUploadedFiles"
									actionListener="#{adminBean.deleteVendorFile}">
									<h:outputText value="Delete" />
									<f:param name="filePath" value="#{doc.filePath}"></f:param>
									<f:param name="id" value="#{doc.id}"></f:param>
								</p:commandLink>
							</h:panelGrid>
						</div>
					</div>
				</c:forEach>
			</p:panel>
 
			<f:facet name="footer">
			    <div style="text-align:center;">
				<p:commandButton value="Save" action="#{adminBean.updateVendor()}"
					onclick="PF('statusDialog').show()"
					oncomplete="PF('statusDialog').hide()" update=":vendorDetails" />
			   </div>		
			</f:facet>
		</p:panel>
	</h:form>



	<h:form id="bankDetails">
		<p:outputPanel id="bank-dEtail">
			<p:panel style="margin-top:1%;"
				id="bankDetailsPanel">

				<f:facet name="header">

					<span style="text-align: right"> <p:commandButton
							value="Vendor's Bank" action="#{adminBean.addBank()}"
							update=":bank-form" immediate="true"
							oncomplete="PF('addBankDlg').show();" />
					</span>
					<span style="padding-left: 41%"> Bank Details </span>
				</f:facet>

				<c:forEach items="${adminBean.vendor.banks}" var="b">
					<p:panel style="margin-top:1%;text-align:center">

						<f:facet name="header">#{b.bankName} Details</f:facet>

						<div class="ui-g"
							style="margin-left: 10%; margin-right: 10%; border: none;">

							<div class="ui-g-12 ui-md-6 ui-lg-4" style="border: none;">
								<h:panelGrid style="border: none;" columns="2">
									<p:outputLabel value="Bank Name :" style="font-weight: bold;" />
									<p:outputLabel value="#{b.bankName}" />
								</h:panelGrid>
							</div>


							<div class="ui-g-12 ui-md-6 ui-lg-4" style="border: none;">
								<h:panelGrid style="border: none;" columns="2">
									<p:outputLabel value="Branch Name :" style="font-weight: bold;" />
									<p:outputLabel value="#{b.bankBranch}" />
								</h:panelGrid>
							</div>


							<div class="ui-g-12 ui-md-6 ui-lg-4" style="border: none;">
								<h:panelGrid style="border: none;" columns="2">
									<p:outputLabel value="Bank Ifsc :" style="font-weight: bold;" />
									<p:outputLabel value="#{b.bankIfsc}" />
								</h:panelGrid>
							</div>


							<div class="ui-g-12 ui-md-6 ui-lg-4" style="border: none;">
								<h:panelGrid style="border: none;" columns="2">
									<p:outputLabel value="Bank Id :" style="font-weight: bold;" />
									<p:outputLabel value="#{b.bankId}" />
								</h:panelGrid>
							</div>


							<div class="ui-g-12 ui-md-6 ui-lg-4" style="border: none;">
								<h:panelGrid style="border: none;" columns="2">
									<p:outputLabel value="Bank Account Number :"
										style="font-weight: bold;" />
									<p:outputLabel value="#{b.bankAccountNo}" />
								</h:panelGrid>
							</div>

							<div class="ui-g-12 ui-md-6 ui-lg-4" style="border: none;">
								<h:panelGrid style="border: none;" columns="2">
									<p:outputLabel value="Payee Name :" style="font-weight: bold;" />
									<p:outputLabel value="#{b.payeeName}" />
								</h:panelGrid>
							</div>

							<div class="ui-g-12 ui-md-6 ui-lg-4" style="border: none;">
								<h:panelGrid style="border: none;" columns="2">
									<p:outputLabel value="Bank Account Type :"
										style="font-weight: bold;" />
									<p:outputLabel value="#{b.bankAccountType}" />
								</h:panelGrid>
							</div>


							<div class="ui-g-12 ui-md-6 ui-lg-4" style="border: none;">
								<h:panelGrid style="border: none;" columns="2">
									<p:outputLabel value="Primary Account :"
										style="font-weight: bold;" />
									<c:if test="${b.primaryAccount eq 'true'}">
										<h:outputText value="Yes" />
									</c:if>
									<c:if test="${b.primaryAccount ne 'true'}">
										<h:outputText value="No" />
									</c:if>
								</h:panelGrid>
							</div>
						</div>



						<f:facet name="footer">
							<div style="text-align: center">

								<p:commandButton value="Edit"
									action="#{adminBean.editBank(adminBean.vendor,b)}"
									oncomplete="PF('updateBankDlg').show();" immediate="true"
									update=":bank-form-edit" />

							</div>
						</f:facet>

					</p:panel>
				</c:forEach>
			</p:panel>
		</p:outputPanel>
	</h:form>

	<h:form id="bank-form">
		<p:dialog header="Add Bank" id="dialog" widgetVar="addBankDlg"
			modal="true" showEffect="explode" hideEffect="fade" width="800">


			<p:panel style="margin-top:1%" id="bank-panelId">

				<f:facet name="header">Add Bank</f:facet>

				<div class="ui-g">
					<div class="ui-g-12 ui-md-12 ui-lg-12">
						<h:panelGrid style="width:100%">
							<p:outputLabel for="bank-name" value="Bank Name:" />
							<p:inputText id="bank-name" value="#{adminBean.bank.bankName}"
								required="true" requiredMessage="Enter Bank Name"
								placeholder="Enter Bank Name" />
							<p:message for="bank-name" />
						</h:panelGrid>
					</div>
				</div>


				<div class="ui-g">
					<div class="ui-g-12 ui-md-12 ui-lg-12">
						<h:panelGrid style="width:100%">
							<p:outputLabel for="bankAccount-no" value="Bank Account No." />
							<p:inputText id="bankAccount-no"
								value="#{adminBean.bank.bankAccountNo}" required="true"
								requiredMessage="Enter Bank Account Number"
								placeholder="Enter Bank Account Number" />
							<p:message for="bankAccount-no" />
						</h:panelGrid>
					</div>
				</div>


				<div class="ui-g">
					<div class="ui-g-12 ui-md-12 ui-lg-12">
						<h:panelGrid style="width:100%">
							<p:outputLabel for="bank-Ifsc" value="Bank Ifsc No." />
							<p:inputText id="bank-Ifsc" value="#{adminBean.bank.bankIfsc}"
								required="true" requiredMessage="Enter Bank Account Number"
								placeholder="Enter Bank Ifsc Number" />
							<p:message for="bank-Ifsc" />
						</h:panelGrid>
					</div>
				</div>


				<div class="ui-g">
					<div class="ui-g-12 ui-md-12 ui-lg-12">
						<h:panelGrid style="width:100%">
							<p:outputLabel for="payee-name" value="Payee Name:" />
							<p:inputText id="payee-name"
								value="#{adminBean.bank.payeeName}" required="true"
								requiredMessage="Enter Payee Name"
								placeholder="Enter Payee Name" />
							<p:message for="payee-name" />
						</h:panelGrid>
					</div>
				</div>

				<div class="ui-g">
					<div class="ui-g-12 ui-md-12 ui-lg-12">
						<h:panelGrid style="width:100%">
							<p:outputLabel for="account-type" value="Bank Account Type:" />
							<p:selectOneMenu id="account-type" style="width:94%!important"
								value="#{adminBean.bank.bankAccountType}" required="true"
								requiredMessage="Enter Bank Account Type">
								<f:selectItem itemLabel="---Select---" itemValue="" />
								<f:selectItem itemValue="SAVING" itemLabel="Saving" />
								<f:selectItem itemValue="CURRENT" itemLabel="Current" />
							</p:selectOneMenu>
							<p:message for="account-type" />
						</h:panelGrid>
					</div>
				</div>



				<div class="ui-g">
					<div class="ui-g-12 ui-md-12 ui-lg-12">
						<h:panelGrid style="width:100%">
							<p:outputLabel for="bank-branch" value="Branch Name:" />
							<p:inputText id="bank-branch"
								value="#{adminBean.bank.bankBranch}" required="true"
								requiredMessage="Enter Branch Name"
								placeholder="Enter Branch Name" />
							<p:message for="bank-branch" />
						</h:panelGrid>
					</div>
				</div>

				<div class="ui-g">
					<div class="ui-g-12 ui-md-12 ui-lg-12">
						<h:panelGrid style="width:100%">
							<p:outputLabel for="bank-primary" value="Primary Account:" />

							<p:selectOneMenu id="bank-primary" style="width:94%!important"
								validator="#{adminBean.checkPrimaryAccount}"
								value="#{adminBean.bank.primaryAccount}">
								<f:selectItem itemLabel="---Select---" itemValue=""
									noSelectionOption="true" />
								<f:selectItem itemValue="true" itemLabel="YES" />
								<f:selectItem itemValue="false" itemLabel="NO" itemDisabled="#{empty adminBean.vendor.banks}" />
								<p:ajax update="primary-account-msg" event="change" />
							</p:selectOneMenu>
							<p:message for="bank-primary" id="primary-account-msg" />
						</h:panelGrid>
					</div>
				</div>

				<f:facet name="footer">
					<div style="text-align: center">
						<p:commandButton value="Save"
							oncomplete="handleLoginRequest(xhr, status, args)"
							actionListener="#{adminBean.addMoreBank()}"
							update="bank-panelId,:bankDetails" />
					</div>
				</f:facet>
			</p:panel>
		</p:dialog>
	</h:form>




	<h:form id="bank-form-edit">
		<p:dialog header="Update Bank" id="dialog" widgetVar="updateBankDlg"
			modal="true" showEffect="explode" hideEffect="fade" width="800">


			<p:panel style="margin-top:1%" id="bank-panelId">

				<f:facet name="header">Update Bank</f:facet>

				<div class="ui-g">
					<div class="ui-g-12 ui-md-12 ui-lg-12">
						<h:panelGrid style="width:100%">
							<p:outputLabel for="bank-name" value="Bank Name:" />
							<p:inputText id="bank-name" value="#{adminBean.bank.bankName}"
								required="true" requiredMessage="Enter Bank Name"
								placeholder="Enter Bank Name" />
							<p:message for="bank-name" />
						</h:panelGrid>
					</div>
				</div>


				<div class="ui-g">
					<div class="ui-g-12 ui-md-12 ui-lg-12">
						<h:panelGrid style="width:100%">
							<p:outputLabel for="bankAccount-no" value="Bank Account No." />
							<p:inputText id="bankAccount-no"
								value="#{adminBean.bank.bankAccountNo}" required="true"
								requiredMessage="Enter Bank Account Number"
								placeholder="Enter Bank Account Number" />
							<p:message for="bankAccount-no" />
						</h:panelGrid>
					</div>
				</div>


				<div class="ui-g">
					<div class="ui-g-12 ui-md-12 ui-lg-12">
						<h:panelGrid style="width:100%">
							<p:outputLabel for="bank-Ifsc" value="Bank Ifsc No." />
							<p:inputText id="bank-Ifsc" value="#{adminBean.bank.bankIfsc}"
								required="true" requiredMessage="Enter Bank Account Number"
								placeholder="Enter Bank Ifsc Number" />
							<p:message for="bank-Ifsc" />
						</h:panelGrid>
					</div>
				</div>


				<div class="ui-g">
					<div class="ui-g-12 ui-md-12 ui-lg-12">
						<h:panelGrid style="width:100%">
							<p:outputLabel for="payee-name" value="Payee Name:" />
							<p:inputText id="payee-name"
								value="#{adminBean.bank.payeeName}" required="true"
								requiredMessage="Enter Payee Name"
								placeholder="Enter Payee Name" />
							<p:message for="payee-name" />
						</h:panelGrid>
					</div>
				</div>

				<div class="ui-g">
					<div class="ui-g-12 ui-md-12 ui-lg-12">
						<h:panelGrid style="width:100%">
							<p:outputLabel for="account-type" value="Bank Account Type:" />
							<p:selectOneMenu id="account-type" style="width:94%!important"
								value="#{adminBean.bank.bankAccountType}" required="true"
								requiredMessage="Enter Bank Account Type">
								<f:selectItem itemLabel="---Select---" itemValue="" />
								<f:selectItem itemValue="SAVING" itemLabel="Saving" />
								<f:selectItem itemValue="CURRENT" itemLabel="Current" />
							</p:selectOneMenu>
							<p:message for="account-type" />
						</h:panelGrid>
					</div>
				</div>



				<div class="ui-g">
					<div class="ui-g-12 ui-md-12 ui-lg-12">
						<h:panelGrid style="width:100%">
							<p:outputLabel for="bank-branch" value="Branch Name:" />
							<p:inputText id="bank-branch"
								value="#{adminBean.bank.bankBranch}" required="true"
								requiredMessage="Enter Branch Name"
								placeholder="Enter Branch Name" />
							<p:message for="bank-branch" />
						</h:panelGrid>
					</div>
				</div>

				<div class="ui-g">
					<div class="ui-g-12 ui-md-12 ui-lg-12">
						<h:panelGrid style="width:100%">
							<p:outputLabel for="bank-primary" value="Primary Account:" />

							<p:selectOneMenu id="bank-primary" style="width:94%!important"
								validator="#{adminBean.checkPrimaryAccountForUpdate}"
								value="#{adminBean.bank.primaryAccount}">
								<f:selectItem itemLabel="---Select---" itemValue=""
									noSelectionOption="true" />
								<f:selectItem itemValue="true" itemLabel="YES" />
								<f:selectItem itemValue="false" itemLabel="NO"/>
								<p:ajax update="primary-account-msg" event="change" />
							</p:selectOneMenu>
							<p:message for="bank-primary" id="primary-account-msg" />
						</h:panelGrid>
					</div>
				</div>

				<f:facet name="footer">
					<div style="text-align: center">
						<p:commandButton value="Save"
							oncomplete="handleLoginRequestUpdate(xhr, status, args)"
							actionListener="#{adminBean.updateBank()}"
							update="bank-panelId,:bankDetails" />

					</div>
				</f:facet>

			</p:panel>

		</p:dialog>
	</h:form>


	<script type="text/javascript">
    function handleLoginRequest(xhr, status, args) {
        if(args.validationFailed) {
            PF('addBankDlg').jq.effect("shake", {times:10}, 100);
        }
        else {
            PF('addBankDlg').hide();
        }
    }


    function handleLoginRequestUpdate(xhr, status, args) {
        if(args.validationFailed) {
            PF('updateBankDlg').jq.effect("shake", {times:10}, 100);
        }
        else {
            PF('updateBankDlg').hide();
        }
    }
  </script>



</ui:composition>